{
  "name": "ROS2 Humble",
  "build": {
    "dockerfile": "Dockerfile",
    "context": ".."
  },

  // コンテナ起動後、ワークスペースをビルド
  "postCreateCommand": "source /opt/ros/humble/setup.bash && colcon build --symlink-install",

  // VS Code 拡張を自動インストール
  "extensions": [
    "ms-iot.vscode-ros",
    "ms-vscode.cpptools",
    "ms-azuretools.vscode-docker"
  ],

  // 推奨設定（例：ターミナルで常に ROS 設定を読む）
  "settings": {
    "terminal.integrated.profiles.linux": {
      "bash": {
        "path": "bash",
        "args": ["-l", "-c", "source /opt/ros/humble/setup.bash && bash"]
      }
    },
    "terminal.integrated.defaultProfile.linux": "bash"
  },

  // 作業用ポートを自動フォワード
  "forwardPorts": [11311, 22333],

  // ホスト UID と合わせると Volume 関連のパーミッションずれ対策に◎
  // "remoteUser": "vscode",   ← これをコメントアウト
  "remoteUser": "root"
}
